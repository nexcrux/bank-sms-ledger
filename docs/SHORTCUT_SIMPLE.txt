â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“± SIMPLE iOS SHORTCUT SETUP (2 minutes)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: Open Shortcuts App
   â†’ Tap "Automation" (bottom)
   â†’ Tap "+" (top right)
   â†’ "Create Personal Automation"

STEP 2: Choose Trigger
   â†’ Select "Message"
   â†’ Tap "Sender"
   â†’ Type your bank name: "AlRajhiBank" (or whatever shows in SMS)
   â†’ Enable "Run Immediately"
   â†’ Tap "Next"

STEP 3: Add ONE Action

   Search: "Get Contents of URL"
   â†’ Add "Get Contents of URL"
   â†’ Configure:

      URL: https://bank-sms-ledger.abdullah-915.workers.dev/ingest

      Method: POST

      Headers: (tap "Add new field" â†’ "Add Header")
         Content-Type: application/json

      Request Body: JSON

      {
        "body": "Shortcut Input",
        "sender": "Sender",
        "received_at": "Current Date"
      }

      IMPORTANT:
         - "Shortcut Input" = tap and select the Message variable (blue pill)
         - "Sender" = tap and select the Sender variable (blue pill)
         - "Current Date" = tap and select Current Date variable (blue pill)

STEP 4: Done!
   â†’ Tap "Done"
   â†’ Next bank SMS will auto-forward

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NOTE: Why do we still capture Current Date?

   received_at = When our system received the SMS

   The actual transaction date/time is IN the SMS body text:
   Example: "...transaction on 28/01/2024 14:30..."

   We'll parse the real transaction timestamp in Issue #2.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEST IT:

   Send yourself a test SMS with text like:
   "Purchase of SAR 150.00 at Starbucks on 28/01/2024"

   Then check database:
   wrangler d1 execute sms-banking-db --remote \
     --command "SELECT * FROM raw_sms ORDER BY id DESC LIMIT 1"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
